/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, HostBinding, Input } from '@angular/core';
import { GridBaseAPIService } from './api.service';
import { IgxColumnComponent } from './column.component';
/**
 * @hidden
 */
export class IgxGridSummaryComponent {
    /**
     * @param {?} gridAPI
     * @param {?} cdr
     */
    constructor(gridAPI, cdr) {
        this.gridAPI = gridAPI;
        this.cdr = cdr;
        this.itemClass = 'igx-grid-summary__item';
    }
    /**
     * @return {?}
     */
    get widthPersistenceClass() {
        return this.column.width !== null;
    }
    /**
     * @return {?}
     */
    get isPinned() {
        return this.column.pinned;
    }
    /**
     * @return {?}
     */
    get isLastPinned() {
        const /** @type {?} */ pinnedCols = this.gridAPI.get(this.gridID).pinnedColumns;
        if (pinnedCols.length === 0) {
            return false;
        }
        else {
            return pinnedCols.indexOf(this.column) === pinnedCols.length - 1;
        }
    }
    /**
     * @return {?}
     */
    get emptyClass() {
        return !this.column.hasSummary;
    }
    /**
     * @return {?}
     */
    get width() {
        return this.column.width;
    }
    /**
     * @return {?}
     */
    get compactCSS() {
        return this.displayDensity === "compact" /* compact */;
    }
    /**
     * @return {?}
     */
    get cosyCSS() {
        return this.displayDensity === "cosy" /* cosy */;
    }
    /**
     * @return {?}
     */
    get defaultCSS() {
        return this.displayDensity === "comfortable" /* comfortable */;
    }
    /**
     * @return {?}
     */
    get dataType() {
        return this.column.dataType;
    }
    /**
     * @return {?}
     */
    ngDoCheck() {
        this.displayDensity = this.gridAPI.get(this.gridID).displayDensity;
        this.summaryItemHeight = this.gridAPI.get(this.gridID).defaultRowHeight;
        this.cdr.detectChanges();
    }
    /**
     * @return {?}
     */
    get resolveSummaries() {
        if (this.fieldName) {
            const /** @type {?} */ field = this.fieldName;
            this.fieldName = null;
            this.gridAPI.set_summary_by_column_name(this.gridID, field);
            if (this.column.field === field) {
                return this.gridAPI.get_summaries(this.gridID).get(field);
            }
            else {
                return this.gridAPI.get_summaries(this.gridID).get(this.column.field);
            }
        }
        else {
            this.gridAPI.set_summary_by_column_name(this.gridID, this.column.field);
            return this.gridAPI.get_summaries(this.gridID).get(this.column.field);
        }
    }
}
IgxGridSummaryComponent.decorators = [
    { type: Component, args: [{
                changeDetection: ChangeDetectionStrategy.OnPush,
                preserveWhitespaces: false,
                selector: 'igx-grid-summary',
                template: `<ng-container *ngIf="column.hasSummary">
    <ng-container *ngFor="let summary of resolveSummaries">
        <div class="{{itemClass}}" [style.height.px]="summaryItemHeight">
            <span class="igx-grid-summary__label" title="{{ summary.label }}">{{ summary.label }}</span>
            <span class="igx-grid-summary__result" title="{{ summary.summaryResult }}">
                {{ column.dataType === 'number' ? (summary.summaryResult | igxdecimal) : column.dataType === 'date' ? (summary.summaryResult | igxdate) : (summary.summaryResult) }}
            </span>
        </div>
    </ng-container>
</ng-container>
`
            },] },
];
/** @nocollapse */
IgxGridSummaryComponent.ctorParameters = () => [
    { type: GridBaseAPIService, },
    { type: ChangeDetectorRef, },
];
IgxGridSummaryComponent.propDecorators = {
    "column": [{ type: Input },],
    "gridID": [{ type: Input },],
    "widthPersistenceClass": [{ type: HostBinding, args: ['class.igx-grid-summary--fw',] },],
    "isPinned": [{ type: HostBinding, args: ['class.igx-grid-summary--pinned',] },],
    "isLastPinned": [{ type: HostBinding, args: ['class.igx-grid-summary--pinned-last',] },],
    "emptyClass": [{ type: HostBinding, args: ['class.igx-grid-summary--empty',] },],
    "width": [{ type: HostBinding, args: ['style.min-width',] }, { type: HostBinding, args: ['style.flex-basis',] },],
    "compactCSS": [{ type: HostBinding, args: ['class.igx-grid-summary--compact',] },],
    "cosyCSS": [{ type: HostBinding, args: ['class.igx-grid-summary--cosy',] },],
    "defaultCSS": [{ type: HostBinding, args: ['class.igx-grid-summary',] },],
};
function IgxGridSummaryComponent_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    IgxGridSummaryComponent.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    IgxGridSummaryComponent.ctorParameters;
    /** @type {!Object<string,!Array<{type: !Function, args: (undefined|!Array<?>)}>>} */
    IgxGridSummaryComponent.propDecorators;
    /** @type {?} */
    IgxGridSummaryComponent.prototype.fieldName;
    /** @type {?} */
    IgxGridSummaryComponent.prototype.column;
    /** @type {?} */
    IgxGridSummaryComponent.prototype.gridID;
    /** @type {?} */
    IgxGridSummaryComponent.prototype.summaryItemHeight;
    /** @type {?} */
    IgxGridSummaryComponent.prototype.itemClass;
    /** @type {?} */
    IgxGridSummaryComponent.prototype.displayDensity;
    /** @type {?} */
    IgxGridSummaryComponent.prototype.gridAPI;
    /** @type {?} */
    IgxGridSummaryComponent.prototype.cdr;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JpZC1zdW1tYXJ5LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2lnbml0ZXVpLWFuZ3VsYXIvIiwic291cmNlcyI6WyJsaWIvZ3JpZHMvZ3JpZC1zdW1tYXJ5LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUNILHVCQUF1QixFQUFFLGlCQUFpQixFQUMxQyxTQUFTLEVBQVcsV0FBVyxFQUFFLEtBQUssRUFDekMsTUFBTSxlQUFlLENBQUM7QUFHdkIsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ25ELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLG9CQUFvQixDQUFDOzs7O0FBcUJ4RCxNQUFNOzs7OztJQStERixZQUFtQixPQUFpRCxFQUFTLEdBQXNCO1FBQWhGLFlBQU8sR0FBUCxPQUFPLENBQTBDO1FBQVMsUUFBRyxHQUFILEdBQUcsQ0FBbUI7eUJBSGhGLHdCQUF3QjtLQUc2RDs7OztRQXBEcEcscUJBQXFCO1FBQ3JCLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUM7Ozs7O1FBSWxDLFFBQVE7UUFDUixNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7Ozs7O1FBSTFCLFlBQVk7UUFDWix1QkFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGFBQWEsQ0FBQztRQUMvRCxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDMUIsTUFBTSxDQUFDLEtBQUssQ0FBQztTQUNoQjtRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ0osTUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1NBQ3BF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b3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBDb21wb25lbnQsIERvQ2hlY2ssIEhvc3RCaW5kaW5nLCBJbnB1dFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERpc3BsYXlEZW5zaXR5IH0gZnJvbSAnLi4vY29yZS9kaXNwbGF5RGVuc2l0eSc7XG5pbXBvcnQgeyBEYXRhVHlwZSB9IGZyb20gJy4uL2RhdGEtb3BlcmF0aW9ucy9kYXRhLXV0aWwnO1xuaW1wb3J0IHsgR3JpZEJhc2VBUElTZXJ2aWNlIH0gZnJvbSAnLi9hcGkuc2VydmljZSc7XG5pbXBvcnQgeyBJZ3hDb2x1bW5Db21wb25lbnQgfSBmcm9tICcuL2NvbHVtbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgSWd4R3JpZEJhc2VDb21wb25lbnQgfSBmcm9tICcuL2dyaWQtYmFzZS5jb21wb25lbnQnO1xuLyoqXG4gKkBoaWRkZW5cbiAqL1xuQENvbXBvbmVudCh7XG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgcHJlc2VydmVXaGl0ZXNwYWNlczogZmFsc2UsXG4gICAgc2VsZWN0b3I6ICdpZ3gtZ3JpZC1zdW1tYXJ5JyxcbiAgICB0ZW1wbGF0ZTogYDxuZy1jb250YWluZXIgKm5nSWY9XCJjb2x1bW4uaGFzU3VtbWFyeVwiPlxuICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IHN1bW1hcnkgb2YgcmVzb2x2ZVN1bW1hcmllc1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwie3tpdGVtQ2xhc3N9fVwiIFtzdHlsZS5oZWlnaHQucHhdPVwic3VtbWFyeUl0ZW1IZWlnaHRcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaWd4LWdyaWQtc3VtbWFyeV9fbGFiZWxcIiB0aXRsZT1cInt7IHN1bW1hcnkubGFiZWwgfX1cIj57eyBzdW1tYXJ5LmxhYmVsIH19PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpZ3gtZ3JpZC1zdW1tYXJ5X19yZXN1bHRcIiB0aXRsZT1cInt7IHN1bW1hcnkuc3VtbWFyeVJlc3VsdCB9fVwiPlxuICAgICAgICAgICAgICAgIHt7IGNvbHVtbi5kYXRhVHlwZSA9PT0gJ251bWJlcicgPyAoc3VtbWFyeS5zdW1tYXJ5UmVzdWx0IHwgaWd4ZGVjaW1hbCkgOiBjb2x1bW4uZGF0YVR5cGUgPT09ICdkYXRlJyA/IChzdW1tYXJ5LnN1bW1hcnlSZXN1bHQgfCBpZ3hkYXRlKSA6IChzdW1tYXJ5LnN1bW1hcnlSZXN1bHQpIH19XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvbmctY29udGFpbmVyPlxuPC9uZy1jb250YWluZXI+XG5gXG59KVxuZXhwb3J0IGNsYXNzIElneEdyaWRTdW1tYXJ5Q29tcG9uZW50IGltcGxlbWVudHMgRG9DaGVjayB7XG5cbiAgICBmaWVsZE5hbWU6IHN0cmluZztcblxuICAgIEBJbnB1dCgpXG4gICAgcHVibGljIGNvbHVtbjogSWd4Q29sdW1uQ29tcG9uZW50O1xuXG4gICAgQElucHV0KClcbiAgICBwdWJsaWMgZ3JpZElEOiBzdHJpbmc7XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmlneC1ncmlkLXN1bW1hcnktLWZ3JylcbiAgICBnZXQgd2lkdGhQZXJzaXN0ZW5jZUNsYXNzKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2x1bW4ud2lkdGggIT09IG51bGw7XG4gICAgfVxuXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5pZ3gtZ3JpZC1zdW1tYXJ5LS1waW5uZWQnKVxuICAgIGdldCBpc1Bpbm5lZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1uLnBpbm5lZDtcbiAgICB9XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmlneC1ncmlkLXN1bW1hcnktLXBpbm5lZC1sYXN0JylcbiAgICBnZXQgaXNMYXN0UGlubmVkKCkge1xuICAgICAgICBjb25zdCBwaW5uZWRDb2xzID0gdGhpcy5ncmlkQVBJLmdldCh0aGlzLmdyaWRJRCkucGlubmVkQ29sdW1ucztcbiAgICAgICAgaWYgKHBpbm5lZENvbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcGlubmVkQ29scy5pbmRleE9mKHRoaXMuY29sdW1uKSA9PT0gcGlubmVkQ29scy5sZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5pZ3gtZ3JpZC1zdW1tYXJ5LS1lbXB0eScpXG4gICAgZ2V0IGVtcHR5Q2xhc3MoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhdGhpcy5jb2x1bW4uaGFzU3VtbWFyeTtcbiAgICB9XG5cbiAgICBASG9zdEJpbmRpbmcoJ3N0eWxlLm1pbi13aWR0aCcpXG4gICAgQEhvc3RCaW5kaW5nKCdzdHlsZS5mbGV4LWJhc2lzJylcbiAgICBnZXQgd2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbHVtbi53aWR0aDtcbiAgICB9XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmlneC1ncmlkLXN1bW1hcnktLWNvbXBhY3QnKVxuICAgIGdldCBjb21wYWN0Q1NTKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5RGVuc2l0eSA9PT0gRGlzcGxheURlbnNpdHkuY29tcGFjdDtcbiAgICB9XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmlneC1ncmlkLXN1bW1hcnktLWNvc3knKVxuICAgIGdldCBjb3N5Q1NTKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5RGVuc2l0eSA9PT0gRGlzcGxheURlbnNpdHkuY29zeTtcbiAgICB9XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmlneC1ncmlkLXN1bW1hcnknKVxuICAgIGdldCBkZWZhdWx0Q1NTKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5RGVuc2l0eSA9PT0gRGlzcGxheURlbnNpdHkuY29tZm9ydGFibGU7XG4gICAgfVxuXG4gICAgZ2V0IGRhdGFUeXBlKCk6IERhdGFUeXBlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1uLmRhdGFUeXBlO1xuICAgIH1cbiAgICBwdWJsaWMgc3VtbWFyeUl0ZW1IZWlnaHQ7XG4gICAgcHVibGljIGl0ZW1DbGFzcyA9ICdpZ3gtZ3JpZC1zdW1tYXJ5X19pdGVtJztcbiAgICBwcml2YXRlIGRpc3BsYXlEZW5zaXR5OiBEaXNwbGF5RGVuc2l0eSB8IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBncmlkQVBJOiBHcmlkQmFzZUFQSVNlcnZpY2U8SWd4R3JpZEJhc2VDb21wb25lbnQ+LCBwdWJsaWMgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZikgeyB9XG5cbiAgICBuZ0RvQ2hlY2soKSB7XG4gICAgICAgIHRoaXMuZGlzcGxheURlbnNpdHkgPSB0aGlzLmdyaWRBUEkuZ2V0KHRoaXMuZ3JpZElEKS5kaXNwbGF5RGVuc2l0eTtcbiAgICAgICAgdGhpcy5zdW1tYXJ5SXRlbUhlaWdodCA9IHRoaXMuZ3JpZEFQSS5nZXQodGhpcy5ncmlkSUQpLmRlZmF1bHRSb3dIZWlnaHQ7XG4gICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICB9XG5cbiAgICBnZXQgcmVzb2x2ZVN1bW1hcmllcygpOiBhbnlbXSB7XG4gICAgICAgIGlmICh0aGlzLmZpZWxkTmFtZSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGQgPSB0aGlzLmZpZWxkTmFtZTtcbiAgICAgICAgICAgIHRoaXMuZmllbGROYW1lID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZ3JpZEFQSS5zZXRfc3VtbWFyeV9ieV9jb2x1bW5fbmFtZSh0aGlzLmdyaWRJRCwgZmllbGQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1uLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdyaWRBUEkuZ2V0X3N1bW1hcmllcyh0aGlzLmdyaWRJRCkuZ2V0KGZpZWxkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZEFQSS5nZXRfc3VtbWFyaWVzKHRoaXMuZ3JpZElEKS5nZXQodGhpcy5jb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5ncmlkQVBJLnNldF9zdW1tYXJ5X2J5X2NvbHVtbl9uYW1lKHRoaXMuZ3JpZElELCB0aGlzLmNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ncmlkQVBJLmdldF9zdW1tYXJpZXModGhpcy5ncmlkSUQpLmdldCh0aGlzLmNvbHVtbi5maWVsZCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXX0=