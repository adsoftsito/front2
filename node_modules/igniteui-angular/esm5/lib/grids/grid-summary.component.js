/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, HostBinding, Input } from '@angular/core';
import { GridBaseAPIService } from './api.service';
import { IgxColumnComponent } from './column.component';
/**
 * @hidden
 */
var IgxGridSummaryComponent = /** @class */ (function () {
    function IgxGridSummaryComponent(gridAPI, cdr) {
        this.gridAPI = gridAPI;
        this.cdr = cdr;
        this.itemClass = 'igx-grid-summary__item';
    }
    Object.defineProperty(IgxGridSummaryComponent.prototype, "widthPersistenceClass", {
        get: /**
         * @return {?}
         */
        function () {
            return this.column.width !== null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxGridSummaryComponent.prototype, "isPinned", {
        get: /**
         * @return {?}
         */
        function () {
            return this.column.pinned;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxGridSummaryComponent.prototype, "isLastPinned", {
        get: /**
         * @return {?}
         */
        function () {
            var /** @type {?} */ pinnedCols = this.gridAPI.get(this.gridID).pinnedColumns;
            if (pinnedCols.length === 0) {
                return false;
            }
            else {
                return pinnedCols.indexOf(this.column) === pinnedCols.length - 1;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxGridSummaryComponent.prototype, "emptyClass", {
        get: /**
         * @return {?}
         */
        function () {
            return !this.column.hasSummary;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxGridSummaryComponent.prototype, "width", {
        get: /**
         * @return {?}
         */
        function () {
            return this.column.width;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxGridSummaryComponent.prototype, "compactCSS", {
        get: /**
         * @return {?}
         */
        function () {
            return this.displayDensity === "compact" /* compact */;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxGridSummaryComponent.prototype, "cosyCSS", {
        get: /**
         * @return {?}
         */
        function () {
            return this.displayDensity === "cosy" /* cosy */;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxGridSummaryComponent.prototype, "defaultCSS", {
        get: /**
         * @return {?}
         */
        function () {
            return this.displayDensity === "comfortable" /* comfortable */;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxGridSummaryComponent.prototype, "dataType", {
        get: /**
         * @return {?}
         */
        function () {
            return this.column.dataType;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    IgxGridSummaryComponent.prototype.ngDoCheck = /**
     * @return {?}
     */
    function () {
        this.displayDensity = this.gridAPI.get(this.gridID).displayDensity;
        this.summaryItemHeight = this.gridAPI.get(this.gridID).defaultRowHeight;
        this.cdr.detectChanges();
    };
    Object.defineProperty(IgxGridSummaryComponent.prototype, "resolveSummaries", {
        get: /**
         * @return {?}
         */
        function () {
            if (this.fieldName) {
                var /** @type {?} */ field = this.fieldName;
                this.fieldName = null;
                this.gridAPI.set_summary_by_column_name(this.gridID, field);
                if (this.column.field === field) {
                    return this.gridAPI.get_summaries(this.gridID).get(field);
                }
                else {
                    return this.gridAPI.get_summaries(this.gridID).get(this.column.field);
                }
            }
            else {
                this.gridAPI.set_summary_by_column_name(this.gridID, this.column.field);
                return this.gridAPI.get_summaries(this.gridID).get(this.column.field);
            }
        },
        enumerable: true,
        configurable: true
    });
    IgxGridSummaryComponent.decorators = [
        { type: Component, args: [{
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    preserveWhitespaces: false,
                    selector: 'igx-grid-summary',
                    template: "<ng-container *ngIf=\"column.hasSummary\">\n    <ng-container *ngFor=\"let summary of resolveSummaries\">\n        <div class=\"{{itemClass}}\" [style.height.px]=\"summaryItemHeight\">\n            <span class=\"igx-grid-summary__label\" title=\"{{ summary.label }}\">{{ summary.label }}</span>\n            <span class=\"igx-grid-summary__result\" title=\"{{ summary.summaryResult }}\">\n                {{ column.dataType === 'number' ? (summary.summaryResult | igxdecimal) : column.dataType === 'date' ? (summary.summaryResult | igxdate) : (summary.summaryResult) }}\n            </span>\n        </div>\n    </ng-container>\n</ng-container>\n"
                },] },
    ];
    /** @nocollapse */
    IgxGridSummaryComponent.ctorParameters = function () { return [
        { type: GridBaseAPIService, },
        { type: ChangeDetectorRef, },
    ]; };
    IgxGridSummaryComponent.propDecorators = {
        "column": [{ type: Input },],
        "gridID": [{ type: Input },],
        "widthPersistenceClass": [{ type: HostBinding, args: ['class.igx-grid-summary--fw',] },],
        "isPinned": [{ type: HostBinding, args: ['class.igx-grid-summary--pinned',] },],
        "isLastPinned": [{ type: HostBinding, args: ['class.igx-grid-summary--pinned-last',] },],
        "emptyClass": [{ type: HostBinding, args: ['class.igx-grid-summary--empty',] },],
        "width": [{ type: HostBinding, args: ['style.min-width',] }, { type: HostBinding, args: ['style.flex-basis',] },],
        "compactCSS": [{ type: HostBinding, args: ['class.igx-grid-summary--compact',] },],
        "cosyCSS": [{ type: HostBinding, args: ['class.igx-grid-summary--cosy',] },],
        "defaultCSS": [{ type: HostBinding, args: ['class.igx-grid-summary',] },],
    };
    return IgxGridSummaryComponent;
}());
export { IgxGridSummaryComponent };
function IgxGridSummaryComponent_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    IgxGridSummaryComponent.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    IgxGridSummaryComponent.ctorParameters;
    /** @type {!Object<string,!Array<{type: !Function, args: (undefined|!Array<?>)}>>} */
    IgxGridSummaryComponent.propDecorators;
    /** @type {?} */
    IgxGridSummaryComponent.prototype.fieldName;
    /** @type {?} */
    IgxGridSummaryComponent.prototype.column;
    /** @type {?} */
    IgxGridSummaryComponent.prototype.gridID;
    /** @type {?} */
    IgxGridSummaryComponent.prototype.summaryItemHeight;
    /** @type {?} */
    IgxGridSummaryComponent.prototype.itemClass;
    /** @type {?} */
    IgxGridSummaryComponent.prototype.displayDensity;
    /** @type {?} */
    IgxGridSummaryComponent.prototype.gridAPI;
    /** @type {?} */
    IgxGridSummaryComponent.prototype.cdr;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JpZC1zdW1tYXJ5LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2lnbml0ZXVpLWFuZ3VsYXIvIiwic291cmNlcyI6WyJsaWIvZ3JpZHMvZ3JpZC1zdW1tYXJ5LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUNILHVCQUF1QixFQUFFLGlCQUFpQixFQUMxQyxTQUFTLEVBQVcsV0FBVyxFQUFFLEtBQUssRUFDekMsTUFBTSxlQUFlLENBQUM7QUFHdkIsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ25ELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLG9CQUFvQixDQUFDOzs7OztJQW9GcEQsaUNBQW1CLE9BQWlELEVBQVMsR0FBc0I7UUFBaEYsWUFBTyxHQUFQLE9BQU8sQ0FBMEM7UUFBUyxRQUFHLEdBQUgsR0FBRyxDQUFtQjt5QkFIaEYsd0JBQXdCO0tBRzZEOzBCQXBEcEcsMERBQXFCOzs7OztZQUNyQixNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDOzs7OzswQkFJbEMsNkNBQVE7Ozs7O1lBQ1IsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDOzs7OzswQkFJMUIsaURBQVk7Ozs7O1lBQ1oscUJBQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxhQUFhLENBQUM7WUFDL0QsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMxQixNQUFNLENBQUMsS0FBSyxDQUFDO2FBQ2hCO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ0osTUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2FB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OytCQUs5QixXQUFXLFNBQUMsaUNBQWlDOzRCQUs3QyxXQUFXLFNBQUMsOEJBQThCOytCQUsxQyxXQUFXLFNBQUMsd0JBQXdCOztrQ0EvRXpDOztTQTRCYSx1QkFBdUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBDb21wb25lbnQsIERvQ2hlY2ssIEhvc3RCaW5kaW5nLCBJbnB1dFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERpc3BsYXlEZW5zaXR5IH0gZnJvbSAnLi4vY29yZS9kaXNwbGF5RGVuc2l0eSc7XG5pbXBvcnQgeyBEYXRhVHlwZSB9IGZyb20gJy4uL2RhdGEtb3BlcmF0aW9ucy9kYXRhLXV0aWwnO1xuaW1wb3J0IHsgR3JpZEJhc2VBUElTZXJ2aWNlIH0gZnJvbSAnLi9hcGkuc2VydmljZSc7XG5pbXBvcnQgeyBJZ3hDb2x1bW5Db21wb25lbnQgfSBmcm9tICcuL2NvbHVtbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgSWd4R3JpZEJhc2VDb21wb25lbnQgfSBmcm9tICcuL2dyaWQtYmFzZS5jb21wb25lbnQnO1xuLyoqXG4gKkBoaWRkZW5cbiAqL1xuQENvbXBvbmVudCh7XG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgcHJlc2VydmVXaGl0ZXNwYWNlczogZmFsc2UsXG4gICAgc2VsZWN0b3I6ICdpZ3gtZ3JpZC1zdW1tYXJ5JyxcbiAgICB0ZW1wbGF0ZTogYDxuZy1jb250YWluZXIgKm5nSWY9XCJjb2x1bW4uaGFzU3VtbWFyeVwiPlxuICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IHN1bW1hcnkgb2YgcmVzb2x2ZVN1bW1hcmllc1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwie3tpdGVtQ2xhc3N9fVwiIFtzdHlsZS5oZWlnaHQucHhdPVwic3VtbWFyeUl0ZW1IZWlnaHRcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaWd4LWdyaWQtc3VtbWFyeV9fbGFiZWxcIiB0aXRsZT1cInt7IHN1bW1hcnkubGFiZWwgfX1cIj57eyBzdW1tYXJ5LmxhYmVsIH19PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpZ3gtZ3JpZC1zdW1tYXJ5X19yZXN1bHRcIiB0aXRsZT1cInt7IHN1bW1hcnkuc3VtbWFyeVJlc3VsdCB9fVwiPlxuICAgICAgICAgICAgICAgIHt7IGNvbHVtbi5kYXRhVHlwZSA9PT0gJ251bWJlcicgPyAoc3VtbWFyeS5zdW1tYXJ5UmVzdWx0IHwgaWd4ZGVjaW1hbCkgOiBjb2x1bW4uZGF0YVR5cGUgPT09ICdkYXRlJyA/IChzdW1tYXJ5LnN1bW1hcnlSZXN1bHQgfCBpZ3hkYXRlKSA6IChzdW1tYXJ5LnN1bW1hcnlSZXN1bHQpIH19XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvbmctY29udGFpbmVyPlxuPC9uZy1jb250YWluZXI+XG5gXG59KVxuZXhwb3J0IGNsYXNzIElneEdyaWRTdW1tYXJ5Q29tcG9uZW50IGltcGxlbWVudHMgRG9DaGVjayB7XG5cbiAgICBmaWVsZE5hbWU6IHN0cmluZztcblxuICAgIEBJbnB1dCgpXG4gICAgcHVibGljIGNvbHVtbjogSWd4Q29sdW1uQ29tcG9uZW50O1xuXG4gICAgQElucHV0KClcbiAgICBwdWJsaWMgZ3JpZElEOiBzdHJpbmc7XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmlneC1ncmlkLXN1bW1hcnktLWZ3JylcbiAgICBnZXQgd2lkdGhQZXJzaXN0ZW5jZUNsYXNzKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2x1bW4ud2lkdGggIT09IG51bGw7XG4gICAgfVxuXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5pZ3gtZ3JpZC1zdW1tYXJ5LS1waW5uZWQnKVxuICAgIGdldCBpc1Bpbm5lZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1uLnBpbm5lZDtcbiAgICB9XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmlneC1ncmlkLXN1bW1hcnktLXBpbm5lZC1sYXN0JylcbiAgICBnZXQgaXNMYXN0UGlubmVkKCkge1xuICAgICAgICBjb25zdCBwaW5uZWRDb2xzID0gdGhpcy5ncmlkQVBJLmdldCh0aGlzLmdyaWRJRCkucGlubmVkQ29sdW1ucztcbiAgICAgICAgaWYgKHBpbm5lZENvbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcGlubmVkQ29scy5pbmRleE9mKHRoaXMuY29sdW1uKSA9PT0gcGlubmVkQ29scy5sZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5pZ3gtZ3JpZC1zdW1tYXJ5LS1lbXB0eScpXG4gICAgZ2V0IGVtcHR5Q2xhc3MoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhdGhpcy5jb2x1bW4uaGFzU3VtbWFyeTtcbiAgICB9XG5cbiAgICBASG9zdEJpbmRpbmcoJ3N0eWxlLm1pbi13aWR0aCcpXG4gICAgQEhvc3RCaW5kaW5nKCdzdHlsZS5mbGV4LWJhc2lzJylcbiAgICBnZXQgd2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbHVtbi53aWR0aDtcbiAgICB9XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmlneC1ncmlkLXN1bW1hcnktLWNvbXBhY3QnKVxuICAgIGdldCBjb21wYWN0Q1NTKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5RGVuc2l0eSA9PT0gRGlzcGxheURlbnNpdHkuY29tcGFjdDtcbiAgICB9XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmlneC1ncmlkLXN1bW1hcnktLWNvc3knKVxuICAgIGdldCBjb3N5Q1NTKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5RGVuc2l0eSA9PT0gRGlzcGxheURlbnNpdHkuY29zeTtcbiAgICB9XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmlneC1ncmlkLXN1bW1hcnknKVxuICAgIGdldCBkZWZhdWx0Q1NTKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5RGVuc2l0eSA9PT0gRGlzcGxheURlbnNpdHkuY29tZm9ydGFibGU7XG4gICAgfVxuXG4gICAgZ2V0IGRhdGFUeXBlKCk6IERhdGFUeXBlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1uLmRhdGFUeXBlO1xuICAgIH1cbiAgICBwdWJsaWMgc3VtbWFyeUl0ZW1IZWlnaHQ7XG4gICAgcHVibGljIGl0ZW1DbGFzcyA9ICdpZ3gtZ3JpZC1zdW1tYXJ5X19pdGVtJztcbiAgICBwcml2YXRlIGRpc3BsYXlEZW5zaXR5OiBEaXNwbGF5RGVuc2l0eSB8IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBncmlkQVBJOiBHcmlkQmFzZUFQSVNlcnZpY2U8SWd4R3JpZEJhc2VDb21wb25lbnQ+LCBwdWJsaWMgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZikgeyB9XG5cbiAgICBuZ0RvQ2hlY2soKSB7XG4gICAgICAgIHRoaXMuZGlzcGxheURlbnNpdHkgPSB0aGlzLmdyaWRBUEkuZ2V0KHRoaXMuZ3JpZElEKS5kaXNwbGF5RGVuc2l0eTtcbiAgICAgICAgdGhpcy5zdW1tYXJ5SXRlbUhlaWdodCA9IHRoaXMuZ3JpZEFQSS5nZXQodGhpcy5ncmlkSUQpLmRlZmF1bHRSb3dIZWlnaHQ7XG4gICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICB9XG5cbiAgICBnZXQgcmVzb2x2ZVN1bW1hcmllcygpOiBhbnlbXSB7XG4gICAgICAgIGlmICh0aGlzLmZpZWxkTmFtZSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGQgPSB0aGlzLmZpZWxkTmFtZTtcbiAgICAgICAgICAgIHRoaXMuZmllbGROYW1lID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZ3JpZEFQSS5zZXRfc3VtbWFyeV9ieV9jb2x1bW5fbmFtZSh0aGlzLmdyaWRJRCwgZmllbGQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1uLmZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdyaWRBUEkuZ2V0X3N1bW1hcmllcyh0aGlzLmdyaWRJRCkuZ2V0KGZpZWxkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZEFQSS5nZXRfc3VtbWFyaWVzKHRoaXMuZ3JpZElEKS5nZXQodGhpcy5jb2x1bW4uZmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5ncmlkQVBJLnNldF9zdW1tYXJ5X2J5X2NvbHVtbl9uYW1lKHRoaXMuZ3JpZElELCB0aGlzLmNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ncmlkQVBJLmdldF9zdW1tYXJpZXModGhpcy5ncmlkSUQpLmdldCh0aGlzLmNvbHVtbi5maWVsZCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXX0=