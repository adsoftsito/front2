/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import * as tslib_1 from "tslib";
import { ChangeDetectorRef, Component, ContentChild, ElementRef, forwardRef, Inject } from '@angular/core';
import { takeUntil } from 'rxjs/operators';
import { IgxDropDownBase, Navigate } from '../drop-down/drop-down.component';
import { IgxComboComponent } from './combo.component';
import { IgxSelectionAPIService } from '../core/selection';
import { IgxForOfDirective } from '../directives/for-of/for_of.directive';
import { Subject } from 'rxjs';
/**
 * @hidden
 */
var IgxComboDropDownComponent = /** @class */ (function (_super) {
    tslib_1.__extends(IgxComboDropDownComponent, _super);
    function IgxComboDropDownComponent(elementRef, cdr, selection, combo) {
        var _this = _super.call(this, elementRef, cdr, selection) || this;
        _this.elementRef = elementRef;
        _this.cdr = cdr;
        _this.selection = selection;
        _this.combo = combo;
        _this._scrollPosition = 0;
        _this.destroy$ = new Subject();
        /**
         *  Event emitter overrides
         *
         * @hidden
         */
        _this.onOpened = _this.combo.onOpened;
        /**
         * @hidden
         */
        _this.onOpening = _this.combo.onOpening;
        /**
         * @hidden
         */
        _this.onClosing = _this.combo.onClosing;
        /**
         * @hidden
         */
        _this.onClosed = _this.combo.onClosed;
        return _this;
    }
    Object.defineProperty(IgxComboDropDownComponent.prototype, "scrollContainer", {
        /**
         * @hidden
         */
        get: /**
         * @hidden
         * @return {?}
         */
        function () {
            return this.verticalScrollContainer.dc.location.nativeElement;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxComboDropDownComponent.prototype, "isScrolledToLast", {
        /**
         * @hidden
         */
        get: /**
         * @hidden
         * @return {?}
         */
        function () {
            var /** @type {?} */ scrollTop = this.verticalScrollContainer.getVerticalScroll().scrollTop;
            var /** @type {?} */ scrollHeight = this.verticalScrollContainer.getVerticalScroll().scrollHeight;
            return Math.floor(scrollTop + this.verticalScrollContainer.igxForContainerSize) === scrollHeight;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxComboDropDownComponent.prototype, "lastVisibleIndex", {
        get: /**
         * @return {?}
         */
        function () {
            return this.combo.totalItemCount ?
                Math.floor(this.combo.itemsMaxHeight / this.combo.itemHeight) :
                this.items.length - 1;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxComboDropDownComponent.prototype, "children", {
        /**
         * @hidden
         */
        get: /**
         * @hidden
         * @return {?}
         */
        function () {
            return this.combo.children;
        },
        set: /**
         * @param {?} list
         * @return {?}
         */
        function (list) {
            this._children = list;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @hidden
     */
    /**
     * @hidden
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.onFocus = /**
     * @hidden
     * @return {?}
     */
    function () {
        this._focusedItem = this._focusedItem ? this._focusedItem : this.items.length ? this.items[0] : this.children.first;
        if (this._focusedItem) {
            this._focusedItem.isFocused = true;
        }
    };
    /**
     * @hidden
     */
    /**
     * @hidden
     * @param {?=} evt
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.onBlur = /**
     * @hidden
     * @param {?=} evt
     * @return {?}
     */
    function (evt) {
        if (this._focusedItem) {
            this._focusedItem.isFocused = false;
            this._focusedItem = null;
        }
    };
    Object.defineProperty(IgxComboDropDownComponent.prototype, "selectedItem", {
        get: /**
         * @hidden
         * @return {?}
         */
        function () {
            var /** @type {?} */ sel = this.selection.get(this.combo.id);
            return sel ? Array.from(sel) : [];
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @hidden
     */
    /**
     * @hidden
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.navigatePrev = /**
     * @hidden
     * @return {?}
     */
    function () {
        if (this._focusedItem.index === 0 && this.verticalScrollContainer.state.startIndex === 0) {
            this.combo.searchInput.nativeElement.focus();
        }
        else {
            _super.prototype.navigatePrev.call(this);
        }
    };
    /**
     * @hidden
     */
    /**
     * @hidden
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.navigateFirst = /**
     * @hidden
     * @return {?}
     */
    function () {
        var _this = this;
        var /** @type {?} */ vContainer = this.verticalScrollContainer;
        if (vContainer.state.startIndex === 0) {
            this.focusItem(0);
            return;
        }
        vContainer.scrollTo(0);
        this.subscribeNext(vContainer, function () {
            _this.combo.triggerCheck();
            _this.focusItem(0);
            _this.combo.triggerCheck();
        });
    };
    /**
     * @hidden
     */
    /**
     * @hidden
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.navigateLast = /**
     * @hidden
     * @return {?}
     */
    function () {
        var _this = this;
        var /** @type {?} */ vContainer = this.verticalScrollContainer;
        var /** @type {?} */ scrollTarget = this.combo.totalItemCount ?
            this.combo.totalItemCount - 1 :
            Math.max(this.combo.data.length - 1, vContainer.igxForOf.length - 1);
        if (vContainer.igxForOf.length <= vContainer.state.startIndex + vContainer.state.chunkSize) {
            this.focusItem(this.items.length - 1);
            return;
        }
        vContainer.scrollTo(scrollTarget);
        this.subscribeNext(vContainer, function () {
            _this.combo.triggerCheck();
            _this.focusItem(_this.items.length - 1);
            _this.combo.triggerCheck();
        });
    };
    /**
     * @hidden
     * @param {?} direction
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.navigateRemoteItem = /**
     * @hidden
     * @param {?} direction
     * @return {?}
     */
    function (direction) {
        var _this = this;
        this.verticalScrollContainer.addScrollTop(direction * this.combo.itemHeight);
        this.subscribeNext(this.verticalScrollContainer, function () {
            if (direction === Navigate.Up) {
                _this.focusItem(0);
            }
            else {
                _this.focusItem(_this.focusedItem.index);
            }
        });
    };
    /**
     * @hidden
     */
    /**
     * @hidden
     * @param {?} itemID
     * @param {?=} select
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.setSelectedItem = /**
     * @hidden
     * @param {?} itemID
     * @param {?=} select
     * @return {?}
     */
    function (itemID, select) {
        if (select === void 0) { select = true; }
        this.combo.setSelectedItem(itemID, select);
    };
    /**
     * @hidden
     */
    /**
     * @hidden
     * @param {?} item
     * @param {?=} event
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.selectItem = /**
     * @hidden
     * @param {?} item
     * @param {?=} event
     * @return {?}
     */
    function (item, event) {
        if (item.value === 'ADD ITEM') {
            if (event) {
                this.combo.addItemToCollection();
            }
        }
        else {
            this.setSelectedItem(item.itemID);
            this._focusedItem = item;
        }
    };
    /**
     * @hidden
     */
    /**
     * @hidden
     * @param {?} newIndex
     * @param {?=} direction
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.navigateItem = /**
     * @hidden
     * @param {?} newIndex
     * @param {?=} direction
     * @return {?}
     */
    function (newIndex, direction) {
        var _this = this;
        // Virtual scrolling holds one hidden loaded element at the bottom of the drop down list.
        // At the top there isn't such a hidden element.
        // That's why we hold the first or the one before the last list item as focused, during keyboard navigation.
        // This means that if we want to focus next element, it's the last hidden element when scrolling down
        // and when scrolling up it is not loaded at all.
        // It's more special case when srcolling down and the hidden element is group header,
        // which is not part of the this.items collection.
        // In that case the real item is not hidden, but not loaded at all by the virtualization,
        // and this is the same case as normal scroll up.
        var /** @type {?} */ vContainer = this.verticalScrollContainer;
        var /** @type {?} */ extraScroll = this.combo.isAddButtonVisible();
        if (direction) {
            if (direction === Navigate.Down && extraScroll) {
                if (vContainer.igxForOf[vContainer.igxForOf.length - 1] === this.focusedItem.value) {
                    if (this.focusedItem) {
                        this.focusedItem.isFocused = false;
                    }
                    this.focusedItem = this.children.last;
                    this.focusedItem.isFocused = true;
                    return;
                }
                else if (vContainer.igxForOf[vContainer.state.chunkSize + vContainer.state.startIndex - 2] ===
                    this.focusedItem.value) {
                    this.subscribeNext(vContainer, function () {
                        if (_this.focusedItem.isHeader &&
                            vContainer.state.startIndex + vContainer.state.chunkSize < vContainer.igxForOf.length) {
                            vContainer.scrollNext();
                        }
                    });
                    vContainer.scrollNext();
                    return;
                }
            }
        }
        if (newIndex === -1) {
            this.navigateVirtualItem(direction, extraScroll ? 1 : 0);
        }
        else if (newIndex === this.lastVisibleIndex && !this.isScrolledToLast) {
            this.navigateVirtualItem(direction, extraScroll ? 1 : 0);
        }
        else if (newIndex === this.lastVisibleIndex && this.isScrolledToLast) {
            // When initially scrolling to the last item, a pseudo element is present in the children list
            // We need to check if the element we're on is an actual element or an empty 'igx-combo-item' child
            if (this.items[newIndex].element && this.items[newIndex].element.nativeElement.clientHeight) {
                _super.prototype.navigateItem.call(this, newIndex);
            }
            return;
        }
        else {
            _super.prototype.navigateItem.call(this, newIndex);
        }
    };
    /**
     * @param {?} direction
     * @param {?=} extraScroll
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.navigateVirtualItem = /**
     * @param {?} direction
     * @param {?=} extraScroll
     * @return {?}
     */
    function (direction, extraScroll) {
        var _this = this;
        var /** @type {?} */ vContainer = this.verticalScrollContainer;
        // If the data is vitualized, data.length === vContainer.chunkSize, so the below checks are no-longer valid
        if (vContainer && vContainer.totalItemCount && vContainer.totalItemCount !== 0) {
            this.navigateRemoteItem(direction);
            return;
        }
        var /** @type {?} */ state = vContainer.state;
        if (this.isScrolledToLast && direction === Navigate.Down) {
            // If on the bottom most item, do not subscribe
            return;
        }
        // If on the topmost item, do not subscribe
        if (this.verticalScrollContainer.getVerticalScroll().scrollTop === 0 && direction === Navigate.Up) {
            return;
        }
        var /** @type {?} */ isScrollUp = direction === Navigate.Up;
        var /** @type {?} */ newScrollStartIndex = isScrollUp ? state.startIndex - 1 : state.startIndex + 1;
        if (newScrollStartIndex < 0) {
            newScrollStartIndex = 0;
        }
        var /** @type {?} */ data = vContainer.igxForOf;
        if (data.length === 0) {
            var /** @type {?} */ newItem = this.children.first;
            if (!newItem) {
                return;
            }
            newItem.isFocused = true;
            this._focusedItem = newItem;
            return;
        }
        // Following the big comment above, when the new item is group header, then we need to load 2 elements at once.
        if (data[newScrollStartIndex].isHeader && direction === Navigate.Up ||
            data[newScrollStartIndex + state.chunkSize - 2].isHeader && direction === Navigate.Down) {
            newScrollStartIndex = isScrollUp ? newScrollStartIndex - 1 : newScrollStartIndex + 1;
            // newScrollStartIndex = mod && direction === Navigate.Down ? newScrollStartIndex + 1 : newScrollStartIndex;
            if (newScrollStartIndex < 0) {
                // If the next item loaded is a header and is also the very first item in the list.
                vContainer.scrollTo(0); // Scrolls to the beginning of the list and switches focus to the searchInput
                this.subscribeNext(vContainer, function () {
                    _this.combo.searchInput.nativeElement.focus();
                    if (_this.focusedItem) {
                        _this.focusedItem.isFocused = false;
                    }
                    _this.focusedItem = null;
                });
                return;
            }
        }
        // If it is the very last item in the collection, when moving down
        if (newScrollStartIndex + state.chunkSize === data.length + 1) {
            vContainer.scrollTo(newScrollStartIndex);
            return;
        }
        vContainer.scrollTo(newScrollStartIndex);
        this.subscribeNext(vContainer, function () {
            state = vContainer.state;
            data = vContainer.igxForOf;
            // Because we are sure that if we scroll up then the top element is not a header, then we focus the first one.
            // When we scroll down, if the newly loaded element that is hidden is group header,
            // then we focus the last item from the this.items array.
            // This is because the this.items doens't contains the group headers, while there are rendered in the combo drop down.
            // If the newly loaded element that is hidden isn't a header, this means that the first visible item, the one that needs focus,
            // should be either the one that is before the last item (this.items).
            var /** @type {?} */ isBottomHiddenHeader = data[state.startIndex + state.chunkSize - 1].isHeader;
            var /** @type {?} */ index = isScrollUp ? 0 : isBottomHiddenHeader ? _this.items.length - 1 - extraScroll : _this.items.length - 2 - extraScroll;
            _this.focusItem(index);
        });
    };
    /**
     * @param {?} virtualContainer
     * @param {?} callback
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.subscribeNext = /**
     * @param {?} virtualContainer
     * @param {?} callback
     * @return {?}
     */
    function (virtualContainer, callback) {
        virtualContainer.onChunkLoad.pipe(takeUntil(this.destroy$)).subscribe({
            next: function (e) {
                callback(e);
            }
        });
    };
    /**
     * @param {?} visibleIndex
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.focusItem = /**
     * @param {?} visibleIndex
     * @return {?}
     */
    function (visibleIndex) {
        var /** @type {?} */ oldItem = this._focusedItem;
        if (oldItem) {
            oldItem.isFocused = false;
        }
        var /** @type {?} */ newItem = this.items[visibleIndex];
        newItem.isFocused = true;
        this._focusedItem = newItem;
    };
    /**
     * @hidden
     */
    /**
     * @hidden
     * @param {?} e
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.onToggleOpening = /**
     * @hidden
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var /** @type {?} */ eventArgs = { cancel: false };
        this.onOpening.emit(eventArgs);
        e.cancel = eventArgs.cancel;
        if (eventArgs.cancel) {
            return;
        }
        this.combo.handleInputChange();
    };
    /**
     * @hidden
     */
    /**
     * @hidden
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.onToggleOpened = /**
     * @hidden
     * @return {?}
     */
    function () {
        this.combo.triggerCheck();
        this.combo.searchInput.nativeElement.focus();
        this.onOpened.emit();
    };
    /**
     * @hidden
     */
    /**
     * @hidden
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.onToggleClosed = /**
     * @hidden
     * @return {?}
     */
    function () {
        this.combo.comboInput.nativeElement.focus();
        this.onClosed.emit();
    };
    /**
     * @hidden
     */
    /**
     * @hidden
     * @param {?} e
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.onToggleClosing = /**
     * @hidden
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.combo.searchValue = '';
        _super.prototype.onToggleClosing.call(this, e);
        this._scrollPosition = this.verticalScrollContainer.getVerticalScroll().scrollTop;
    };
    /**
     * @hidden
     */
    /**
     * @hidden
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.updateScrollPosition = /**
     * @hidden
     * @return {?}
     */
    function () {
        this.verticalScrollContainer.getVerticalScroll().scrollTop = this._scrollPosition;
    };
    /**
     * @hidden
     * @return {?}
     */
    IgxComboDropDownComponent.prototype.ngOnDestroy = /**
     * @hidden
     * @return {?}
     */
    function () {
        this.destroy$.next(true);
        this.destroy$.complete();
    };
    IgxComboDropDownComponent.decorators = [
        { type: Component, args: [{
                    selector: 'igx-combo-drop-down',
                    template: "<div class=\"igx-drop-down\">\n    <div class=\"igx-drop-down__list\" igxToggle (onOpening)=\"onToggleOpening($event)\" (onOpened)=\"onToggleOpened()\" (onClosing)=\"onToggleClosing($event)\" (onClosed)=\"onToggleClosed()\">\n        <ng-container *ngIf=\"!collapsed\">\n            <ng-content></ng-content>\n        </ng-container>\n    </div>\n</div>"
                },] },
    ];
    /** @nocollapse */
    IgxComboDropDownComponent.ctorParameters = function () { return [
        { type: ElementRef, },
        { type: ChangeDetectorRef, },
        { type: IgxSelectionAPIService, },
        { type: IgxComboComponent, decorators: [{ type: Inject, args: [forwardRef(function () { return IgxComboComponent; }),] },] },
    ]; };
    IgxComboDropDownComponent.propDecorators = {
        "verticalScrollContainer": [{ type: ContentChild, args: [forwardRef(function () { return IgxForOfDirective; }), { read: IgxForOfDirective },] },],
    };
    return IgxComboDropDownComponent;
}(IgxDropDownBase));
export { IgxComboDropDownComponent };
function IgxComboDropDownComponent_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    IgxComboDropDownComponent.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    IgxComboDropDownComponent.ctorParameters;
    /** @type {!Object<string,!Array<{type: !Function, args: (undefined|!Array<?>)}>>} */
    IgxComboDropDownComponent.propDecorators;
    /** @type {?} */
    IgxComboDropDownComponent.prototype._children;
    /** @type {?} */
    IgxComboDropDownComponent.prototype._scrollPosition;
    /** @type {?} */
    IgxComboDropDownComponent.prototype.destroy$;
    /**
     *  Event emitter overrides
     *
     * @hidden
     * @type {?}
     */
    IgxComboDropDownComponent.prototype.onOpened;
    /**
     * @hidden
     * @type {?}
     */
    IgxComboDropDownComponent.prototype.onOpening;
    /**
     * @hidden
     * @type {?}
     */
    IgxComboDropDownComponent.prototype.onClosing;
    /**
     * @hidden
     * @type {?}
     */
    IgxComboDropDownComponent.prototype.onClosed;
    /**
     * @hidden
     * @type {?}
     */
    IgxComboDropDownComponent.prototype.verticalScrollContainer;
    /** @type {?} */
    IgxComboDropDownComponent.prototype.elementRef;
    /** @type {?} */
    IgxComboDropDownComponent.prototype.cdr;
    /** @type {?} */
    IgxComboDropDownComponent.prototype.selection;
    /** @type {?} */
    IgxComboDropDownComponent.prototype.combo;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tYm8tZHJvcGRvd24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vaWduaXRldWktYW5ndWxhci8iLCJzb3VyY2VzIjpbImxpYi9jb21iby9jb21iby1kcm9wZG93bi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQ0gsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFDMUMsVUFBVSxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQ2pDLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUMzQyxPQUFPLEVBQUUsZUFBZSxFQUFFLFFBQVEsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBRTdFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRXRELE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQzNELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBQzFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7Ozs7O0lBY2dCLHFEQUFlO0lBSTFELG1DQUNjLFVBQXNCLEVBQ3RCLEdBQXNCLEVBQ3RCLFNBQWlDLEVBRXBDO1FBTFgsWUFNSSxrQkFBTSxVQUFVLEVBQUUsR0FBRyxFQUFFLFNBQVMsQ0FBQyxTQUNwQztRQU5hLGdCQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ3RCLFNBQUcsR0FBSCxHQUFHLENBQW1CO1FBQ3RCLGVBQVMsR0FBVCxTQUFTLENBQXdCO1FBRXBDLFdBQUssR0FBTCxLQUFLO2dDQVBVLENBQUM7eUJBQ1IsSUFBSSxPQUFPLEVBQVc7Ozs7Ozt5QkFxQ3ZCLEtBQUksQ0FBQyxLQUFLLENBQUMsUUFBUTs7OzswQkFLbEIsS0FBSSxDQUFDLEtBQUssQ0FBQyxTQUFTOzs7OzBCQUtwQixLQUFJLENBQUMsS0FBSyxDQUFDLFNBQVM7Ozs7eUJBS3JC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dUJBMEJqQixNQUFNLFNBQUMsVUFBVSxDQUFDLGNBQU0sT0FBQSxpQkFBaUIsRUFBakIsQ0FBaUIsQ0FBQzs7OzRDQW9EOUMsWUFBWSxTQUFDLFVBQVUsQ0FBQyxjQUFNLE9BQUEsaUJBQWlCLEVBQWpCLENBQWlCLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxpQkFBaUIsRUFBRTs7b0NBckZsRjtFQXlCK0MsZUFBZTtTQUFqRCx5QkFBeUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQsIENvbnRlbnRDaGlsZCxcbiAgICBFbGVtZW50UmVmLCBmb3J3YXJkUmVmLCBJbmplY3QsIFF1ZXJ5TGlzdCwgRXZlbnRFbWl0dGVyLCBPbkRlc3Ryb3lcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBJZ3hEcm9wRG93bkJhc2UsIE5hdmlnYXRlIH0gZnJvbSAnLi4vZHJvcC1kb3duL2Ryb3AtZG93bi5jb21wb25lbnQnO1xuaW1wb3J0IHsgSWd4RHJvcERvd25JdGVtQmFzZSB9IGZyb20gJy4uL2Ryb3AtZG93bi9kcm9wLWRvd24taXRlbS5jb21wb25lbnQnO1xuaW1wb3J0IHsgSWd4Q29tYm9Db21wb25lbnQgfSBmcm9tICcuL2NvbWJvLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBJZ3hDb21ib0l0ZW1Db21wb25lbnQgfSBmcm9tICcuL2NvbWJvLWl0ZW0uY29tcG9uZW50JztcbmltcG9ydCB7IElneFNlbGVjdGlvbkFQSVNlcnZpY2UgfSBmcm9tICcuLi9jb3JlL3NlbGVjdGlvbic7XG5pbXBvcnQgeyBJZ3hGb3JPZkRpcmVjdGl2ZSB9IGZyb20gJy4uL2RpcmVjdGl2ZXMvZm9yLW9mL2Zvcl9vZi5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgQ2FuY2VsYWJsZUV2ZW50QXJncyB9IGZyb20gJy4uL2NvcmUvdXRpbHMnO1xuXG4vKiogQGhpZGRlbiAqL1xuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdpZ3gtY29tYm8tZHJvcC1kb3duJyxcbiAgICB0ZW1wbGF0ZTogYDxkaXYgY2xhc3M9XCJpZ3gtZHJvcC1kb3duXCI+XG4gICAgPGRpdiBjbGFzcz1cImlneC1kcm9wLWRvd25fX2xpc3RcIiBpZ3hUb2dnbGUgKG9uT3BlbmluZyk9XCJvblRvZ2dsZU9wZW5pbmcoJGV2ZW50KVwiIChvbk9wZW5lZCk9XCJvblRvZ2dsZU9wZW5lZCgpXCIgKG9uQ2xvc2luZyk9XCJvblRvZ2dsZUNsb3NpbmcoJGV2ZW50KVwiIChvbkNsb3NlZCk9XCJvblRvZ2dsZUNsb3NlZCgpXCI+XG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhY29sbGFwc2VkXCI+XG4gICAgICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwvZGl2PlxuPC9kaXY+YFxufSlcbmV4cG9ydCBjbGFzcyBJZ3hDb21ib0Ryb3BEb3duQ29tcG9uZW50IGV4dGVuZHMgSWd4RHJvcERvd25CYXNlIGltcGxlbWVudHMgT25EZXN0cm95IHtcbiAgICBwcml2YXRlIF9jaGlsZHJlbjogUXVlcnlMaXN0PElneERyb3BEb3duSXRlbUJhc2U+O1xuICAgIHByaXZhdGUgX3Njcm9sbFBvc2l0aW9uID0gMDtcbiAgICBwcml2YXRlIGRlc3Ryb3kkID0gbmV3IFN1YmplY3Q8Ym9vbGVhbj4oKTtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJvdGVjdGVkIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXG4gICAgICAgIHByb3RlY3RlZCBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxuICAgICAgICBwcm90ZWN0ZWQgc2VsZWN0aW9uOiBJZ3hTZWxlY3Rpb25BUElTZXJ2aWNlLFxuICAgICAgICBASW5qZWN0KGZvcndhcmRSZWYoKCkgPT4gSWd4Q29tYm9Db21wb25lbnQpKVxuICAgICAgICBwdWJsaWMgY29tYm86IElneENvbWJvQ29tcG9uZW50KSB7XG4gICAgICAgIHN1cGVyKGVsZW1lbnRSZWYsIGNkciwgc2VsZWN0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGdldCBzY3JvbGxDb250YWluZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlcnRpY2FsU2Nyb2xsQ29udGFpbmVyLmRjLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHByb3RlY3RlZCBnZXQgaXNTY3JvbGxlZFRvTGFzdCgpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3Qgc2Nyb2xsVG9wID0gdGhpcy52ZXJ0aWNhbFNjcm9sbENvbnRhaW5lci5nZXRWZXJ0aWNhbFNjcm9sbCgpLnNjcm9sbFRvcDtcbiAgICAgICAgY29uc3Qgc2Nyb2xsSGVpZ2h0ID0gdGhpcy52ZXJ0aWNhbFNjcm9sbENvbnRhaW5lci5nZXRWZXJ0aWNhbFNjcm9sbCgpLnNjcm9sbEhlaWdodDtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3Ioc2Nyb2xsVG9wICsgdGhpcy52ZXJ0aWNhbFNjcm9sbENvbnRhaW5lci5pZ3hGb3JDb250YWluZXJTaXplKSA9PT0gc2Nyb2xsSGVpZ2h0O1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgbGFzdFZpc2libGVJbmRleCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21iby50b3RhbEl0ZW1Db3VudCA/XG4gICAgICAgICAgICBNYXRoLmZsb29yKHRoaXMuY29tYm8uaXRlbXNNYXhIZWlnaHQgLyB0aGlzLmNvbWJvLml0ZW1IZWlnaHQpIDpcbiAgICAgICAgICAgIHRoaXMuaXRlbXMubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAgRXZlbnQgZW1pdHRlciBvdmVycmlkZXNcbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwdWJsaWMgb25PcGVuZWQgPSB0aGlzLmNvbWJvLm9uT3BlbmVkO1xuXG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHB1YmxpYyBvbk9wZW5pbmcgPSB0aGlzLmNvbWJvLm9uT3BlbmluZztcblxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwdWJsaWMgb25DbG9zaW5nID0gdGhpcy5jb21iby5vbkNsb3Npbmc7XG5cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgcHVibGljIG9uQ2xvc2VkID0gdGhpcy5jb21iby5vbkNsb3NlZDtcblxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBAQ29udGVudENoaWxkKGZvcndhcmRSZWYoKCkgPT4gSWd4Rm9yT2ZEaXJlY3RpdmUpLCB7IHJlYWQ6IElneEZvck9mRGlyZWN0aXZlIH0pXG4gICAgcHVibGljIHZlcnRpY2FsU2Nyb2xsQ29udGFpbmVyOiBJZ3hGb3JPZkRpcmVjdGl2ZTxhbnk+O1xuXG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHByb3RlY3RlZCBnZXQgY2hpbGRyZW4oKTogUXVlcnlMaXN0PElneERyb3BEb3duSXRlbUJhc2U+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tYm8uY2hpbGRyZW47XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHNldCBjaGlsZHJlbihsaXN0OiBRdWVyeUxpc3Q8SWd4RHJvcERvd25JdGVtQmFzZT4pIHtcbiAgICAgICAgdGhpcy5fY2hpbGRyZW4gPSBsaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBvbkZvY3VzKCkge1xuICAgICAgICB0aGlzLl9mb2N1c2VkSXRlbSA9IHRoaXMuX2ZvY3VzZWRJdGVtID8gdGhpcy5fZm9jdXNlZEl0ZW0gOiB0aGlzLml0ZW1zLmxlbmd0aCA/IHRoaXMuaXRlbXNbMF0gOiB0aGlzLmNoaWxkcmVuLmZpcnN0O1xuICAgICAgICBpZiAodGhpcy5fZm9jdXNlZEl0ZW0pIHtcbiAgICAgICAgICAgIHRoaXMuX2ZvY3VzZWRJdGVtLmlzRm9jdXNlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgb25CbHVyKGV2dD8pIHtcbiAgICAgICAgaWYgKHRoaXMuX2ZvY3VzZWRJdGVtKSB7XG4gICAgICAgICAgICB0aGlzLl9mb2N1c2VkSXRlbS5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX2ZvY3VzZWRJdGVtID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHNlbGVjdGVkSXRlbSgpOiBhbnlbXSB7XG4gICAgICAgIGNvbnN0IHNlbCA9IHRoaXMuc2VsZWN0aW9uLmdldCh0aGlzLmNvbWJvLmlkKTtcbiAgICAgICAgcmV0dXJuIHNlbCA/IEFycmF5LmZyb20oc2VsKSA6IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBuYXZpZ2F0ZVByZXYoKSB7XG4gICAgICAgIGlmICh0aGlzLl9mb2N1c2VkSXRlbS5pbmRleCA9PT0gMCAmJiB0aGlzLnZlcnRpY2FsU2Nyb2xsQ29udGFpbmVyLnN0YXRlLnN0YXJ0SW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuY29tYm8uc2VhcmNoSW5wdXQubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3VwZXIubmF2aWdhdGVQcmV2KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgbmF2aWdhdGVGaXJzdCgpIHtcbiAgICAgICAgY29uc3QgdkNvbnRhaW5lciA9IHRoaXMudmVydGljYWxTY3JvbGxDb250YWluZXI7XG4gICAgICAgIGlmICh2Q29udGFpbmVyLnN0YXRlLnN0YXJ0SW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNJdGVtKDApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZDb250YWluZXIuc2Nyb2xsVG8oMCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlTmV4dCh2Q29udGFpbmVyLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbWJvLnRyaWdnZXJDaGVjaygpO1xuICAgICAgICAgICAgdGhpcy5mb2N1c0l0ZW0oMCk7XG4gICAgICAgICAgICB0aGlzLmNvbWJvLnRyaWdnZXJDaGVjaygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgbmF2aWdhdGVMYXN0KCkge1xuICAgICAgICBjb25zdCB2Q29udGFpbmVyID0gdGhpcy52ZXJ0aWNhbFNjcm9sbENvbnRhaW5lcjtcbiAgICAgICAgY29uc3Qgc2Nyb2xsVGFyZ2V0ID0gdGhpcy5jb21iby50b3RhbEl0ZW1Db3VudCA/XG4gICAgICAgICAgICB0aGlzLmNvbWJvLnRvdGFsSXRlbUNvdW50IC0gMSA6XG4gICAgICAgICAgICBNYXRoLm1heCh0aGlzLmNvbWJvLmRhdGEubGVuZ3RoIC0gMSwgdkNvbnRhaW5lci5pZ3hGb3JPZi5sZW5ndGggLSAxKTtcbiAgICAgICAgaWYgKHZDb250YWluZXIuaWd4Rm9yT2YubGVuZ3RoIDw9IHZDb250YWluZXIuc3RhdGUuc3RhcnRJbmRleCArIHZDb250YWluZXIuc3RhdGUuY2h1bmtTaXplKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzSXRlbSh0aGlzLml0ZW1zLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZDb250YWluZXIuc2Nyb2xsVG8oc2Nyb2xsVGFyZ2V0KTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVOZXh0KHZDb250YWluZXIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29tYm8udHJpZ2dlckNoZWNrKCk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzSXRlbSh0aGlzLml0ZW1zLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgdGhpcy5jb21iby50cmlnZ2VyQ2hlY2soKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIHByaXZhdGUgbmF2aWdhdGVSZW1vdGVJdGVtKGRpcmVjdGlvbikge1xuICAgICAgICB0aGlzLnZlcnRpY2FsU2Nyb2xsQ29udGFpbmVyLmFkZFNjcm9sbFRvcChkaXJlY3Rpb24gKiB0aGlzLmNvbWJvLml0ZW1IZWlnaHQpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZU5leHQodGhpcy52ZXJ0aWNhbFNjcm9sbENvbnRhaW5lciwgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gTmF2aWdhdGUuVXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzSXRlbSgwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c0l0ZW0odGhpcy5mb2N1c2VkSXRlbS5pbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZXRTZWxlY3RlZEl0ZW0oaXRlbUlEOiBhbnksIHNlbGVjdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5jb21iby5zZXRTZWxlY3RlZEl0ZW0oaXRlbUlELCBzZWxlY3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBzZWxlY3RJdGVtKGl0ZW06IElneENvbWJvSXRlbUNvbXBvbmVudCwgZXZlbnQ/OiBFdmVudCkge1xuICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gJ0FERCBJVEVNJykge1xuICAgICAgICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21iby5hZGRJdGVtVG9Db2xsZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkSXRlbShpdGVtLml0ZW1JRCk7XG4gICAgICAgICAgICB0aGlzLl9mb2N1c2VkSXRlbSA9IGl0ZW07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgbmF2aWdhdGVJdGVtKG5ld0luZGV4OiBudW1iZXIsIGRpcmVjdGlvbj86IG51bWJlcikge1xuICAgICAgICAvLyBWaXJ0dWFsIHNjcm9sbGluZyBob2xkcyBvbmUgaGlkZGVuIGxvYWRlZCBlbGVtZW50IGF0IHRoZSBib3R0b20gb2YgdGhlIGRyb3AgZG93biBsaXN0LlxuICAgICAgICAvLyBBdCB0aGUgdG9wIHRoZXJlIGlzbid0IHN1Y2ggYSBoaWRkZW4gZWxlbWVudC5cbiAgICAgICAgLy8gVGhhdCdzIHdoeSB3ZSBob2xkIHRoZSBmaXJzdCBvciB0aGUgb25lIGJlZm9yZSB0aGUgbGFzdCBsaXN0IGl0ZW0gYXMgZm9jdXNlZCwgZHVyaW5nIGtleWJvYXJkIG5hdmlnYXRpb24uXG4gICAgICAgIC8vIFRoaXMgbWVhbnMgdGhhdCBpZiB3ZSB3YW50IHRvIGZvY3VzIG5leHQgZWxlbWVudCwgaXQncyB0aGUgbGFzdCBoaWRkZW4gZWxlbWVudCB3aGVuIHNjcm9sbGluZyBkb3duXG4gICAgICAgIC8vIGFuZCB3aGVuIHNjcm9sbGluZyB1cCBpdCBpcyBub3QgbG9hZGVkIGF0IGFsbC5cbiAgICAgICAgLy8gSXQncyBtb3JlIHNwZWNpYWwgY2FzZSB3aGVuIHNyY29sbGluZyBkb3duIGFuZCB0aGUgaGlkZGVuIGVsZW1lbnQgaXMgZ3JvdXAgaGVhZGVyLFxuICAgICAgICAvLyB3aGljaCBpcyBub3QgcGFydCBvZiB0aGUgdGhpcy5pdGVtcyBjb2xsZWN0aW9uLlxuICAgICAgICAvLyBJbiB0aGF0IGNhc2UgdGhlIHJlYWwgaXRlbSBpcyBub3QgaGlkZGVuLCBidXQgbm90IGxvYWRlZCBhdCBhbGwgYnkgdGhlIHZpcnR1YWxpemF0aW9uLFxuICAgICAgICAvLyBhbmQgdGhpcyBpcyB0aGUgc2FtZSBjYXNlIGFzIG5vcm1hbCBzY3JvbGwgdXAuXG4gICAgICAgIGNvbnN0IHZDb250YWluZXIgPSB0aGlzLnZlcnRpY2FsU2Nyb2xsQ29udGFpbmVyO1xuICAgICAgICBjb25zdCBleHRyYVNjcm9sbCA9IHRoaXMuY29tYm8uaXNBZGRCdXR0b25WaXNpYmxlKCk7XG4gICAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09IE5hdmlnYXRlLkRvd24gJiYgZXh0cmFTY3JvbGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodkNvbnRhaW5lci5pZ3hGb3JPZlt2Q29udGFpbmVyLmlneEZvck9mLmxlbmd0aCAtIDFdID09PSB0aGlzLmZvY3VzZWRJdGVtLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvY3VzZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzZWRJdGVtLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZEl0ZW0gPSB0aGlzLmNoaWxkcmVuLmxhc3Q7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZEl0ZW0uaXNGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodkNvbnRhaW5lci5pZ3hGb3JPZlt2Q29udGFpbmVyLnN0YXRlLmNodW5rU2l6ZSArIHZDb250YWluZXIuc3RhdGUuc3RhcnRJbmRleCAtIDJdID09PVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzZWRJdGVtLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlTmV4dCh2Q29udGFpbmVyLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mb2N1c2VkSXRlbS5pc0hlYWRlciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZDb250YWluZXIuc3RhdGUuc3RhcnRJbmRleCArIHZDb250YWluZXIuc3RhdGUuY2h1bmtTaXplIDwgdkNvbnRhaW5lci5pZ3hGb3JPZi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Q29udGFpbmVyLnNjcm9sbE5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZDb250YWluZXIuc2Nyb2xsTmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGVWaXJ0dWFsSXRlbShkaXJlY3Rpb24sIGV4dHJhU2Nyb2xsID8gMSA6IDApO1xuICAgICAgICB9IGVsc2UgaWYgKG5ld0luZGV4ID09PSB0aGlzLmxhc3RWaXNpYmxlSW5kZXggJiYgIXRoaXMuaXNTY3JvbGxlZFRvTGFzdCkge1xuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVZpcnR1YWxJdGVtKGRpcmVjdGlvbiwgZXh0cmFTY3JvbGwgPyAxIDogMCk7XG4gICAgICAgIH0gZWxzZSBpZiAobmV3SW5kZXggPT09IHRoaXMubGFzdFZpc2libGVJbmRleCAmJiB0aGlzLmlzU2Nyb2xsZWRUb0xhc3QpIHtcbiAgICAgICAgICAgIC8vIFdoZW4gaW5pdGlhbGx5IHNjcm9sbGluZyB0byB0aGUgbGFzdCBpdGVtLCBhIHBzZXVkbyBlbGVtZW50IGlzIHByZXNlbnQgaW4gdGhlIGNoaWxkcmVuIGxpc3RcbiAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gY2hlY2sgaWYgdGhlIGVsZW1lbnQgd2UncmUgb24gaXMgYW4gYWN0dWFsIGVsZW1lbnQgb3IgYW4gZW1wdHkgJ2lneC1jb21iby1pdGVtJyBjaGlsZFxuICAgICAgICAgICAgaWYgKHRoaXMuaXRlbXNbbmV3SW5kZXhdLmVsZW1lbnQgJiYgdGhpcy5pdGVtc1tuZXdJbmRleF0uZWxlbWVudC5uYXRpdmVFbGVtZW50LmNsaWVudEhlaWdodCkge1xuICAgICAgICAgICAgICAgIHN1cGVyLm5hdmlnYXRlSXRlbShuZXdJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdXBlci5uYXZpZ2F0ZUl0ZW0obmV3SW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBuYXZpZ2F0ZVZpcnR1YWxJdGVtKGRpcmVjdGlvbjogTmF2aWdhdGUsIGV4dHJhU2Nyb2xsPzogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHZDb250YWluZXIgPSB0aGlzLnZlcnRpY2FsU2Nyb2xsQ29udGFpbmVyO1xuICAgICAgICAvLyBJZiB0aGUgZGF0YSBpcyB2aXR1YWxpemVkLCBkYXRhLmxlbmd0aCA9PT0gdkNvbnRhaW5lci5jaHVua1NpemUsIHNvIHRoZSBiZWxvdyBjaGVja3MgYXJlIG5vLWxvbmdlciB2YWxpZFxuICAgICAgICBpZiAodkNvbnRhaW5lciAmJiB2Q29udGFpbmVyLnRvdGFsSXRlbUNvdW50ICYmIHZDb250YWluZXIudG90YWxJdGVtQ291bnQgIT09IDApIHtcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGVSZW1vdGVJdGVtKGRpcmVjdGlvbik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0YXRlID0gdkNvbnRhaW5lci5zdGF0ZTtcbiAgICAgICAgaWYgKHRoaXMuaXNTY3JvbGxlZFRvTGFzdCAmJiBkaXJlY3Rpb24gPT09IE5hdmlnYXRlLkRvd24pIHsgLy8gSWYgb24gdGhlIGJvdHRvbSBtb3N0IGl0ZW0sIGRvIG5vdCBzdWJzY3JpYmVcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBvbiB0aGUgdG9wbW9zdCBpdGVtLCBkbyBub3Qgc3Vic2NyaWJlXG4gICAgICAgIGlmICh0aGlzLnZlcnRpY2FsU2Nyb2xsQ29udGFpbmVyLmdldFZlcnRpY2FsU2Nyb2xsKCkuc2Nyb2xsVG9wID09PSAwICYmIGRpcmVjdGlvbiA9PT0gTmF2aWdhdGUuVXApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc1Njcm9sbFVwID0gZGlyZWN0aW9uID09PSBOYXZpZ2F0ZS5VcDtcbiAgICAgICAgbGV0IG5ld1Njcm9sbFN0YXJ0SW5kZXggPSBpc1Njcm9sbFVwID8gc3RhdGUuc3RhcnRJbmRleCAtIDEgOiBzdGF0ZS5zdGFydEluZGV4ICsgMTtcbiAgICAgICAgaWYgKG5ld1Njcm9sbFN0YXJ0SW5kZXggPCAwKSB7XG4gICAgICAgICAgICBuZXdTY3JvbGxTdGFydEluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGF0YSA9IHZDb250YWluZXIuaWd4Rm9yT2Y7XG5cbiAgICAgICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdJdGVtID0gdGhpcy5jaGlsZHJlbi5maXJzdDtcbiAgICAgICAgICAgIGlmICghbmV3SXRlbSkgeyByZXR1cm47IH1cbiAgICAgICAgICAgIG5ld0l0ZW0uaXNGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2ZvY3VzZWRJdGVtID0gbmV3SXRlbTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBGb2xsb3dpbmcgdGhlIGJpZyBjb21tZW50IGFib3ZlLCB3aGVuIHRoZSBuZXcgaXRlbSBpcyBncm91cCBoZWFkZXIsIHRoZW4gd2UgbmVlZCB0byBsb2FkIDIgZWxlbWVudHMgYXQgb25jZS5cbiAgICAgICAgaWYgKGRhdGFbbmV3U2Nyb2xsU3RhcnRJbmRleF0uaXNIZWFkZXIgJiYgZGlyZWN0aW9uID09PSBOYXZpZ2F0ZS5VcCB8fFxuICAgICAgICAgICAgZGF0YVtuZXdTY3JvbGxTdGFydEluZGV4ICsgc3RhdGUuY2h1bmtTaXplIC0gMl0uaXNIZWFkZXIgJiYgZGlyZWN0aW9uID09PSBOYXZpZ2F0ZS5Eb3duKSB7XG4gICAgICAgICAgICBuZXdTY3JvbGxTdGFydEluZGV4ID0gaXNTY3JvbGxVcCA/IG5ld1Njcm9sbFN0YXJ0SW5kZXggLSAxIDogbmV3U2Nyb2xsU3RhcnRJbmRleCArIDE7XG4gICAgICAgICAgICAvLyBuZXdTY3JvbGxTdGFydEluZGV4ID0gbW9kICYmIGRpcmVjdGlvbiA9PT0gTmF2aWdhdGUuRG93biA/IG5ld1Njcm9sbFN0YXJ0SW5kZXggKyAxIDogbmV3U2Nyb2xsU3RhcnRJbmRleDtcbiAgICAgICAgICAgIGlmIChuZXdTY3JvbGxTdGFydEluZGV4IDwgMCkgeyAvLyBJZiB0aGUgbmV4dCBpdGVtIGxvYWRlZCBpcyBhIGhlYWRlciBhbmQgaXMgYWxzbyB0aGUgdmVyeSBmaXJzdCBpdGVtIGluIHRoZSBsaXN0LlxuICAgICAgICAgICAgICAgIHZDb250YWluZXIuc2Nyb2xsVG8oMCk7IC8vIFNjcm9sbHMgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgbGlzdCBhbmQgc3dpdGNoZXMgZm9jdXMgdG8gdGhlIHNlYXJjaElucHV0XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVOZXh0KHZDb250YWluZXIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21iby5zZWFyY2hJbnB1dC5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvY3VzZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzZWRJdGVtLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZEl0ZW0gPSBudWxsO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBpdCBpcyB0aGUgdmVyeSBsYXN0IGl0ZW0gaW4gdGhlIGNvbGxlY3Rpb24sIHdoZW4gbW92aW5nIGRvd25cbiAgICAgICAgaWYgKG5ld1Njcm9sbFN0YXJ0SW5kZXggKyBzdGF0ZS5jaHVua1NpemUgPT09IGRhdGEubGVuZ3RoICsgMSkge1xuICAgICAgICAgICAgdkNvbnRhaW5lci5zY3JvbGxUbyhuZXdTY3JvbGxTdGFydEluZGV4KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2Q29udGFpbmVyLnNjcm9sbFRvKG5ld1Njcm9sbFN0YXJ0SW5kZXgpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZU5leHQodkNvbnRhaW5lciwgKCkgPT4ge1xuICAgICAgICAgICAgc3RhdGUgPSB2Q29udGFpbmVyLnN0YXRlO1xuICAgICAgICAgICAgZGF0YSA9IHZDb250YWluZXIuaWd4Rm9yT2Y7XG5cbiAgICAgICAgICAgIC8vIEJlY2F1c2Ugd2UgYXJlIHN1cmUgdGhhdCBpZiB3ZSBzY3JvbGwgdXAgdGhlbiB0aGUgdG9wIGVsZW1lbnQgaXMgbm90IGEgaGVhZGVyLCB0aGVuIHdlIGZvY3VzIHRoZSBmaXJzdCBvbmUuXG4gICAgICAgICAgICAvLyBXaGVuIHdlIHNjcm9sbCBkb3duLCBpZiB0aGUgbmV3bHkgbG9hZGVkIGVsZW1lbnQgdGhhdCBpcyBoaWRkZW4gaXMgZ3JvdXAgaGVhZGVyLFxuICAgICAgICAgICAgLy8gdGhlbiB3ZSBmb2N1cyB0aGUgbGFzdCBpdGVtIGZyb20gdGhlIHRoaXMuaXRlbXMgYXJyYXkuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGJlY2F1c2UgdGhlIHRoaXMuaXRlbXMgZG9lbnMndCBjb250YWlucyB0aGUgZ3JvdXAgaGVhZGVycywgd2hpbGUgdGhlcmUgYXJlIHJlbmRlcmVkIGluIHRoZSBjb21ibyBkcm9wIGRvd24uXG4gICAgICAgICAgICAvLyBJZiB0aGUgbmV3bHkgbG9hZGVkIGVsZW1lbnQgdGhhdCBpcyBoaWRkZW4gaXNuJ3QgYSBoZWFkZXIsIHRoaXMgbWVhbnMgdGhhdCB0aGUgZmlyc3QgdmlzaWJsZSBpdGVtLCB0aGUgb25lIHRoYXQgbmVlZHMgZm9jdXMsXG4gICAgICAgICAgICAvLyBzaG91bGQgYmUgZWl0aGVyIHRoZSBvbmUgdGhhdCBpcyBiZWZvcmUgdGhlIGxhc3QgaXRlbSAodGhpcy5pdGVtcykuXG4gICAgICAgICAgICBjb25zdCBpc0JvdHRvbUhpZGRlbkhlYWRlciA9IGRhdGFbc3RhdGUuc3RhcnRJbmRleCArIHN0YXRlLmNodW5rU2l6ZSAtIDFdLmlzSGVhZGVyO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBpc1Njcm9sbFVwID8gMCA6IGlzQm90dG9tSGlkZGVuSGVhZGVyID8gdGhpcy5pdGVtcy5sZW5ndGggLSAxIC0gZXh0cmFTY3JvbGwgOiB0aGlzLml0ZW1zLmxlbmd0aCAtIDIgLSBleHRyYVNjcm9sbDtcblxuICAgICAgICAgICAgdGhpcy5mb2N1c0l0ZW0oaW5kZXgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN1YnNjcmliZU5leHQodmlydHVhbENvbnRhaW5lcjogYW55LCBjYWxsYmFjazogKGVsZW0/KSA9PiB2b2lkKSB7XG4gICAgICAgIHZpcnR1YWxDb250YWluZXIub25DaHVua0xvYWQucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpLnN1YnNjcmliZSh7XG4gICAgICAgICAgICBuZXh0OiAoZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZm9jdXNJdGVtKHZpc2libGVJbmRleDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IG9sZEl0ZW0gPSB0aGlzLl9mb2N1c2VkSXRlbTtcbiAgICAgICAgaWYgKG9sZEl0ZW0pIHtcbiAgICAgICAgICAgIG9sZEl0ZW0uaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3SXRlbSA9IHRoaXMuaXRlbXNbdmlzaWJsZUluZGV4XTtcbiAgICAgICAgbmV3SXRlbS5pc0ZvY3VzZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9mb2N1c2VkSXRlbSA9IG5ld0l0ZW07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uVG9nZ2xlT3BlbmluZyhlOiBDYW5jZWxhYmxlRXZlbnRBcmdzKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50QXJncyA9IHsgY2FuY2VsOiBmYWxzZSB9O1xuICAgICAgICB0aGlzLm9uT3BlbmluZy5lbWl0KGV2ZW50QXJncyk7XG4gICAgICAgIGUuY2FuY2VsID0gZXZlbnRBcmdzLmNhbmNlbDtcbiAgICAgICAgaWYgKGV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbWJvLmhhbmRsZUlucHV0Q2hhbmdlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uVG9nZ2xlT3BlbmVkKCkge1xuICAgICAgICB0aGlzLmNvbWJvLnRyaWdnZXJDaGVjaygpO1xuICAgICAgICB0aGlzLmNvbWJvLnNlYXJjaElucHV0Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5vbk9wZW5lZC5lbWl0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIG9uVG9nZ2xlQ2xvc2VkKCkge1xuICAgICAgICB0aGlzLmNvbWJvLmNvbWJvSW5wdXQubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICB0aGlzLm9uQ2xvc2VkLmVtaXQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgb25Ub2dnbGVDbG9zaW5nKGU6IENhbmNlbGFibGVFdmVudEFyZ3MpIHtcbiAgICAgICAgdGhpcy5jb21iby5zZWFyY2hWYWx1ZSA9ICcnO1xuICAgICAgICBzdXBlci5vblRvZ2dsZUNsb3NpbmcoZSk7XG4gICAgICAgIHRoaXMuX3Njcm9sbFBvc2l0aW9uID0gdGhpcy52ZXJ0aWNhbFNjcm9sbENvbnRhaW5lci5nZXRWZXJ0aWNhbFNjcm9sbCgpLnNjcm9sbFRvcDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgdXBkYXRlU2Nyb2xsUG9zaXRpb24oKSB7XG4gICAgICAgIHRoaXMudmVydGljYWxTY3JvbGxDb250YWluZXIuZ2V0VmVydGljYWxTY3JvbGwoKS5zY3JvbGxUb3AgPSB0aGlzLl9zY3JvbGxQb3NpdGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKkBoaWRkZW5cbiAgICAgKi9cbiAgICBwdWJsaWMgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCh0cnVlKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xuICAgIH1cbn1cbiJdfQ==