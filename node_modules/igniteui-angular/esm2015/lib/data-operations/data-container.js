/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { DataUtil } from './data-util';
/** @enum {number} */
const DataAccess = {
    OriginalData: 0,
    TransformedData: 1,
};
export { DataAccess };
DataAccess[DataAccess.OriginalData] = "OriginalData";
DataAccess[DataAccess.TransformedData] = "TransformedData";
/**
 * @hidden
 */
export class DataContainer {
    /**
     * @param {?=} data
     */
    constructor(data = []) {
        this.state = {};
        this.data = data;
        this.transformedData = data;
    }
    /**
     * @param {?=} state
     * @return {?}
     */
    process(state) {
        if (state) {
            this.state = state;
        }
        this.transformedData = this.data;
        // apply data operations
        this.transformedData = DataUtil.process(this.data, this.state);
        return this;
    }
    /**
     * @param {?} record
     * @param {?=} dataAccess
     * @return {?}
     */
    getIndexOfRecord(record, dataAccess = DataAccess.OriginalData) {
        const /** @type {?} */ data = this.accessData(dataAccess);
        return data.indexOf(record);
    }
    /**
     * @param {?} index
     * @param {?=} dataAccess
     * @return {?}
     */
    getRecordByIndex(index, dataAccess = DataAccess.OriginalData) {
        const /** @type {?} */ data = this.accessData(dataAccess);
        return data[index];
    }
    /**
     * @param {?} fieldName
     * @param {?} value
     * @param {?=} dataAccess
     * @return {?}
     */
    getRecordInfoByKeyValue(fieldName, value, dataAccess = DataAccess.OriginalData) {
        const /** @type {?} */ data = this.accessData(dataAccess);
        const /** @type {?} */ len = data.length;
        const /** @type {?} */ res = { index: -1, record: undefined };
        let /** @type {?} */ i;
        for (i = 0; i < len; i++) {
            if (data[i][fieldName] === value) {
                res.index = i;
                res.record = data[i];
                break;
            }
        }
        return res;
    }
    /**
     * @param {?} record
     * @param {?=} at
     * @return {?}
     */
    addRecord(record, at) {
        const /** @type {?} */ data = this.accessData(DataAccess.OriginalData);
        if (at === null || at === undefined) {
            data.push(record);
        }
        else {
            data.splice(at, 0, record);
        }
    }
    /**
     * @param {?} record
     * @return {?}
     */
    deleteRecord(record) {
        const /** @type {?} */ index = this.getIndexOfRecord(record, DataAccess.OriginalData);
        return this.deleteRecordByIndex(index);
    }
    /**
     * @param {?} index
     * @return {?}
     */
    deleteRecordByIndex(index) {
        const /** @type {?} */ data = this.accessData(DataAccess.OriginalData);
        return data.splice(index, 1).length === 1;
    }
    /**
     * @param {?} index
     * @param {?} newProperties
     * @return {?}
     */
    updateRecordByIndex(index, newProperties) {
        const /** @type {?} */ dataAccess = DataAccess.OriginalData;
        const /** @type {?} */ foundRec = this.getRecordByIndex(index, dataAccess);
        if (!foundRec) {
            return undefined;
        }
        return Object.assign(foundRec, newProperties);
    }
    /**
     * @param {?} dataAccess
     * @return {?}
     */
    accessData(dataAccess) {
        let /** @type {?} */ res;
        switch (dataAccess) {
            case DataAccess.OriginalData:
                res = this.data;
                break;
            case DataAccess.TransformedData:
                res = this.transformedData;
                break;
        }
        return res;
    }
}
function DataContainer_tsickle_Closure_declarations() {
    /** @type {?} */
    DataContainer.prototype.data;
    /**
     * processed data
     * @type {?}
     */
    DataContainer.prototype.transformedData;
    /** @type {?} */
    DataContainer.prototype.state;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YS1jb250YWluZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9pZ25pdGV1aS1hbmd1bGFyLyIsInNvdXJjZXMiOlsibGliL2RhdGEtb3BlcmF0aW9ucy9kYXRhLWNvbnRhaW5lci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQ0EsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGFBQWEsQ0FBQzs7Ozs7Ozs7Ozs7O0FBcUJ2QyxNQUFNOzs7O0lBUUYsWUFBWSxPQUFjLEVBQUU7cUJBRkQsRUFDMUI7UUFFRyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztLQUMvQjs7Ozs7SUFDTSxPQUFPLENBQUMsS0FBa0I7UUFDN0IsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUNSLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1NBQ3RCO1FBQ0QsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDOztRQUVqQyxJQUFJLENBQUMsZUFBZSxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDL0QsTUFBTSxDQUFDLElBQUksQ0FBQzs7Ozs7OztJQUlULGdCQUFnQixDQUFDLE1BQWMsRUFBRSxhQUF5QixVQUFVLENBQUMsWUFBWTtRQUNwRix1QkFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN6QyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQzs7Ozs7OztJQUV6QixnQkFBZ0IsQ0FBQyxLQUFhLEVBQUUsYUFBeUIsVUFBVSxDQUFDLFlBQVk7UUFDbkYsdUJBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDekMsTUFBTSxDQUFDLElBQUksQ0FB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Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSURhdGFTdGF0ZSB9IGZyb20gJy4vZGF0YS1zdGF0ZS5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgRGF0YVV0aWwgfSBmcm9tICcuL2RhdGEtdXRpbCc7XG5pbXBvcnQgeyBGaWx0ZXJpbmdMb2dpYywgSUZpbHRlcmluZ0V4cHJlc3Npb24gfSBmcm9tICcuL2ZpbHRlcmluZy1leHByZXNzaW9uLmludGVyZmFjZSc7XG5pbXBvcnQgeyBJRmlsdGVyaW5nU3RhdGUgfSBmcm9tICcuL2ZpbHRlcmluZy1zdGF0ZS5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgRmlsdGVyaW5nU3RyYXRlZ3ksIElGaWx0ZXJpbmdTdHJhdGVneSB9IGZyb20gJy4vZmlsdGVyaW5nLXN0cmF0ZWd5JztcbmltcG9ydCB7IElQYWdpbmdTdGF0ZSwgUGFnaW5nRXJyb3IgfSBmcm9tICcuL3BhZ2luZy1zdGF0ZS5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgSVJlY29yZEluZm8gfSBmcm9tICcuL3JlY29yZC1pbmZvLmludGVyZmFjZSc7XG5pbXBvcnQgeyBJU29ydGluZ0V4cHJlc3Npb24sIFNvcnRpbmdEaXJlY3Rpb24gfSBmcm9tICcuL3NvcnRpbmctZXhwcmVzc2lvbi5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgSVNvcnRpbmdTdGF0ZSB9IGZyb20gJy4vc29ydGluZy1zdGF0ZS5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgSVNvcnRpbmdTdHJhdGVneSwgU29ydGluZ1N0cmF0ZWd5IH0gZnJvbSAnLi9zb3J0aW5nLXN0cmF0ZWd5JztcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBlbnVtIERhdGFBY2Nlc3Mge1xuICAgIE9yaWdpbmFsRGF0YSxcbiAgICBUcmFuc2Zvcm1lZERhdGFcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBEYXRhQ29udGFpbmVyIHtcbiAgICBwdWJsaWMgZGF0YTogYW55W107XG4gICAgLyoqXG4gICAgICogcHJvY2Vzc2VkIGRhdGFcbiAgICAgKi9cbiAgICBwdWJsaWMgdHJhbnNmb3JtZWREYXRhOiBhbnlbXTtcbiAgICBwdWJsaWMgc3RhdGU6IElEYXRhU3RhdGUgPSB7XG4gICAgfTtcbiAgICBjb25zdHJ1Y3RvcihkYXRhOiBhbnlbXSA9IFtdKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtZWREYXRhID0gZGF0YTtcbiAgICB9XG4gICAgcHVibGljIHByb2Nlc3Moc3RhdGU/OiBJRGF0YVN0YXRlKTogRGF0YUNvbnRhaW5lciB7XG4gICAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJhbnNmb3JtZWREYXRhID0gdGhpcy5kYXRhO1xuICAgICAgICAvLyBhcHBseSBkYXRhIG9wZXJhdGlvbnNcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1lZERhdGEgPSBEYXRhVXRpbC5wcm9jZXNzKHRoaXMuZGF0YSwgdGhpcy5zdGF0ZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyBDUlVEIG9wZXJhdGlvbnNcbiAgICAvLyBhY2Nlc3MgZGF0YSByZWNvcmRzXG4gICAgcHVibGljIGdldEluZGV4T2ZSZWNvcmQocmVjb3JkOiBvYmplY3QsIGRhdGFBY2Nlc3M6IERhdGFBY2Nlc3MgPSBEYXRhQWNjZXNzLk9yaWdpbmFsRGF0YSk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmFjY2Vzc0RhdGEoZGF0YUFjY2Vzcyk7XG4gICAgICAgIHJldHVybiBkYXRhLmluZGV4T2YocmVjb3JkKTtcbiAgICB9XG4gICAgcHVibGljIGdldFJlY29yZEJ5SW5kZXgoaW5kZXg6IG51bWJlciwgZGF0YUFjY2VzczogRGF0YUFjY2VzcyA9IERhdGFBY2Nlc3MuT3JpZ2luYWxEYXRhKTogb2JqZWN0IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuYWNjZXNzRGF0YShkYXRhQWNjZXNzKTtcbiAgICAgICAgcmV0dXJuIGRhdGFbaW5kZXhdO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0UmVjb3JkSW5mb0J5S2V5VmFsdWUoZmllbGROYW1lOiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhbnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFBY2Nlc3M6IERhdGFBY2Nlc3MgPSBEYXRhQWNjZXNzLk9yaWdpbmFsRGF0YSk6IElSZWNvcmRJbmZvIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuYWNjZXNzRGF0YShkYXRhQWNjZXNzKTtcbiAgICAgICAgY29uc3QgbGVuID0gZGF0YS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHJlczogSVJlY29yZEluZm8gPSB7aW5kZXg6IC0xLCByZWNvcmQ6IHVuZGVmaW5lZH07XG4gICAgICAgIGxldCBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChkYXRhW2ldW2ZpZWxkTmFtZV0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmVzLmluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICByZXMucmVjb3JkID0gZGF0YVtpXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBwdWJsaWMgYWRkUmVjb3JkKHJlY29yZDogb2JqZWN0LCBhdD86IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5hY2Nlc3NEYXRhKERhdGFBY2Nlc3MuT3JpZ2luYWxEYXRhKTtcbiAgICAgICAgaWYgKGF0ID09PSBudWxsIHx8IGF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRhdGEucHVzaChyZWNvcmQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YS5zcGxpY2UoYXQsIDAsIHJlY29yZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHVibGljIGRlbGV0ZVJlY29yZChyZWNvcmQ6IG9iamVjdCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBpbmRleDogbnVtYmVyID0gdGhpcy5nZXRJbmRleE9mUmVjb3JkKHJlY29yZCwgRGF0YUFjY2Vzcy5PcmlnaW5hbERhdGEpO1xuICAgICAgICByZXR1cm4gdGhpcy5kZWxldGVSZWNvcmRCeUluZGV4KGluZGV4KTtcbiAgICB9XG4gICAgcHVibGljIGRlbGV0ZVJlY29yZEJ5SW5kZXgoaW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5hY2Nlc3NEYXRhKERhdGFBY2Nlc3MuT3JpZ2luYWxEYXRhKTtcbiAgICAgICAgcmV0dXJuIGRhdGEuc3BsaWNlKGluZGV4LCAxKS5sZW5ndGggPT09IDE7XG4gICAgfVxuICAgIHB1YmxpYyB1cGRhdGVSZWNvcmRCeUluZGV4KGluZGV4OiBudW1iZXIsIG5ld1Byb3BlcnRpZXM6IG9iamVjdCk6IG9iamVjdCB7XG4gICAgICAgIGNvbnN0IGRhdGFBY2Nlc3M6IERhdGFBY2Nlc3MgPSBEYXRhQWNjZXNzLk9yaWdpbmFsRGF0YTtcbiAgICAgICAgY29uc3QgZm91bmRSZWMgPSB0aGlzLmdldFJlY29yZEJ5SW5kZXgoaW5kZXgsIGRhdGFBY2Nlc3MpO1xuICAgICAgICBpZiAoIWZvdW5kUmVjKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKGZvdW5kUmVjLCBuZXdQcm9wZXJ0aWVzKTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIGFjY2Vzc0RhdGEoZGF0YUFjY2VzczogRGF0YUFjY2Vzcykge1xuICAgICAgICBsZXQgcmVzO1xuICAgICAgICBzd2l0Y2ggKGRhdGFBY2Nlc3MpIHtcbiAgICAgICAgICAgIGNhc2UgRGF0YUFjY2Vzcy5PcmlnaW5hbERhdGE6XG4gICAgICAgICAgICByZXMgPSB0aGlzLmRhdGE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRGF0YUFjY2Vzcy5UcmFuc2Zvcm1lZERhdGE6XG4gICAgICAgICAgICByZXMgPSB0aGlzLnRyYW5zZm9ybWVkRGF0YTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufVxuIl19